<!DOCTYPE html>
<html>
<head>
	<title></title>
	<link rel="stylesheet" type="text/css" href="MainPageStyles.css">
<!-- 	<link rel="stylesheet" type="text/css" href="rangeslider.css"> -->
	<link rel="stylesheet" type="text/css" href="nouislider.css">
	<link href="https://fonts.googleapis.com/css?family=Montserrat:300i,300,400,500,600,700|Open+Sans:300,400,400i" rel="stylesheet">
	<script src="https://code.jquery.com/jquery-1.10.2.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/skrollr/0.6.30/skrollr.min.js"></script>
	<!-- <script src='rangeslider.min.js'></script> -->
	<script src="https://www.gstatic.com/firebasejs/4.9.1/firebase.js"></script>
	<script type="text/javascript" src="nouislider.js"></script>
	<script src="wnumb.js"></script>

	<!--font-family: 'Open Sans', sans-serif;
		font-family: 'Montserrat', sans-serif; -->
</head>

<body>
	<div id="nameGardenContentWrapper">
		<div id="darkBackground">
			
		</div>
		<div id="modalBackgroundnameGarden">
			<div id="content3">
				<div id="nameGardenWrapper">
					<div id="CustomFarmImg2Wrapper">
						
					</div>
					<h4 id="congratulations">Congratulations!</h4>
					<h6 id="congratulationsText">Join the community by adding a name to your farm of the future!</h6>
					<form><input type="text" id="userid" name="user" placeholder="NAME YOUR FARM"></form>
					<button id="SubmitNameButton">Join</button>
					<div class="circleXm3">
					</div>
					<button class="xm3" id="missionX3">
					</button>
				</div>
			</div>
		</div> 
	</div>
	<div id="missionStatementContentWrapper">
		<div id="darkBackground">
			
		</div>
		<div id="modalBackground">
			<div id="content2">
				<img id="MissionStatementImg2" src="Assets/PNG_72ppi/Mission_Statement2.png">
				<div id="MissionStatementWrapper2">
					<h3 id="MissionStatementTitle2">Our Mission</h3>
					<h5 id="MissionStatementBody2">
					Herban is not just a company, we are a green-based lifestyle </br>brand. By taking advantage of a digital marketplace, autonomous gardening, and drone delivery system, Herban will sell and deliver locally sourced produce directly to and from our customers' doorsteps.  Our mission is to drive the change required for a sustainable future. By limiting the amount of traditional farmland needed to feed a growing population and by integrating green spaces into every facet of city life, our Green Breeze system will foster environmental rejuvination and healthier city ecosystems.
					</h5>
					<div class="circleXm2">
					</div>
					<button class="xm2" id="missionX2">
					</button>
				</div>
			</div>
		</div> 
	</div>

	<div id="HighLevelNavigationTop">
			<span id="Span1"> <a data-text="OUR MISSION" id="mission_Statement">OUR MISSION</a></span>
		    <span id="Span2"><a href="MainHomePage4.html#introWrapper" data-text="GARDEN BUILDER" id="SelectedNavItem">GARDEN BUILDER</a></span>
		    <span id="Span3"> <a href="MainHomePage4.html" data-text="HERBAN LOGO" id="HerbanLogo4"></a></span>
		    <span id="Span4"><a href="Further_Reading.html" data-text="FURTHER READINGS" ">FURTHER READINGS</a></span>
		    <span id="Span5"><a href="GardenBuilder_Community.html" data-text="THE COMMUNITY" >THE COMMUNITY</a></span>
		    <!-- <a href="MainHomePage4.html#introWrapper" data-text="GARDEN BUILDER" id="SelectedNavItem">GARDEN BUILDER</a>
		    <span> <a data-text="OUR MISSION" id="mission_Statement">OUR MISSION </a></span>
		    <span> <a href="MainHomePage4.html" data-text="HERBAN LOGO" id="HerbanLogo4"></a></span>
		    <span><a href="Further_Reading.html" data-text="FURTHER READINGS">FURTHER READINGS</a></span>
		    <span><a href="_____" data-text="THE COMMUNITY" >THE COMMUNITY</a></span> -->
		</div> 
	<div id="GardenBuilderNavigationTop">
	    <a href="GardenBuilder_GrowingPriorities.html" data-text="Growing Priorities" class="GreenNav">Growing Priorities</a>
	    <img src="Assets/checkButton.png" class="check">
	    <div class="line" id="line1"></div>
	    <div class="line" id="line2"></div>
	    <img src="Assets/checkButton.png" class="check2">
	    <div class="line" id="line3"></div>
	    <div class="line" id="line4"></div>
	     <img src="Assets/checkButton.png" class="check3">
	    <div class="line" id="line5"></div>
	    <div class="line" id="line6"></div>
	    <!-- <div class="dot_1"></div>
	    <div class="dot_2"></div> -->
	    <a href="GardenBuilder_UrbanSpaces.html" data-text="Urban Spaces" class="GreenNav">Urban Spaces</a>
	    <a href="GardenBuilder_FarmSystems.html" data-text="Farm Systems" class="GreenNav">Farm Systems</a>
	    <a href="GardenBuilder_FarmCustomization.html" data-text="Farm Customization" id="SelectedNav" class="GreenNav">Farm Customization</a>
	</div> 
	<img id="CongratulationsFineTuneIllustration" src="Assets/PNG_72ppi/Introduction_Customize_Garden.png">
	
	<div id="CongratulationsFineTuneWrapper">
		<h3>Great choices! Now its time to customize your garden.</h3>
		<h5>Scroll to access our dashboard where you will have the chance to personalize your previous choices and see the impact of your garden.</h5>
	</div>
	<a class="arrow-wrap" href="#content">
		<span class="arrow"></span>
	<!--<span class="hint">scroll</span>-->
	</a>
	<div id="CustomFarmWrapper">
		
		<h3 id="choice_Catalog"> Your Chosen Product Features</h3>
		<div id="catalog_Wrapper" >
			<div id="priorityWrapper" class="catalogItemWrap">
				<div id="priorityHeader" class="titleHeader"></div>
			</div>
			<div id="scaleWrapper" class="catalogItemWrap">
				<div id="scaleHeader" class="titleHeader"></div>
			</div>
			<div id="costWrapper" class="catalogItemWrap">
				<div id="costHeader" class="titleHeader"></div>
			</div>
		</div>
		<div id="fineTuneSectionWrapper">
			<div id="chosenWrapper">
				
			</div>
			<div id="excerciseWrapper">
				
			</div>
			<div id="resultsHeader">
				
			</div>
			<!-- <div id="resultsSectionWrapper">
				<div id="resultsbackground">
					
				</div>
				<table id="final_Results" border="0" cellpadding="12" cellspacing="0" style="border-collapse: collapse; width: 85%; margin: 1.5em; margin-left: 4.3em; font-family: 'Open Sans', sans-serif;">
					
				<tbody>
					<th style="text-align: left; font-family: 'Montserrat', sans-serif; font-size: 20px; font-weight: 600; color: #559B98;border-spacing: 25px; padding-bottom: 30px;">Urban Farm Results</th>
				    <tr style="border-bottom: 1px solid rgba(85, 155, 152, .4); border-top: 1px solid rgba(85, 155, 152, .4); line-height: 1.8em; font-size: 16px;">
				    	
				      <td style="width: 45%; color: #4A4A4A;">Value of Crops Grown:</td>
				      <td id="result1" style="width: 55%; font-weight: bold; text-align: right; color: #559B98;">result1</td></tr>
				    <tr style="border-bottom: 1px solid rgba(85, 155, 152, .4); line-height: 1.8em;font-size: 16px"">
				      <td style="width: 45%;  color: #4A4A4A;">Amount of Water Saved:</td>
				      <td id="result2" style="width: 55%; font-weight: bold;text-align: right; color: #559B98;">result2</td></tr>
				    <tr style="border-bottom: 1px solid rgba(85, 155, 152, .4); line-height: 1.8em;font-size: 16px"">
				      <td style="width: 45%;  color: #4A4A4A;">CO2 Emissions Removed:</td>
				      <td id="result3" style="width: 55%; text-align: right;font-weight: bold; color: #559B98;">result3</td>
				    </tr>
				    <tr style="border-bottom: 1px solid rgba(85, 155, 152, .4); line-height: 1.8em;font-size: 16px"">
				      <td style="width: 45%;  color: #4A4A4A;">Amount of Meals Created:</td>
				      <td id="result4" style="width: 55%; text-align: right; font-weight: bold;color: #559B98;">result4</td>
				    </tr>
				  </tbody>
				</table>
			</div> -->
			<div id="resultsSectionWrapper">
				<div id="resultsbackground">
					<div id="ResultsTitle">
						Urban Farm Results
					</div>
					<div id="resultsWrap">
						<div class="wraps" id="valueofCropWrap">
							<h3 id="actualValueCrop"></h3>
							<div class="resultsLine"></div>
							<div class="bodyTitle" id="bodyTextValueofCrop">Value of Crops Grown</div>
						</div>
						<div class="wraps" id="gallonsofWater">
							<h3 id="actualGallonsWater"></h3>
							<div class="resultsLine"></div>
							<div class="bodyTitle" id="bodyTextGallonsofWater">Gallons of Water Saved</div>
						</div>
						<div class="wraps" id="gallonsofGas">
							<h3 id="actualGallonsGas"></h3>
							<div class="resultsLine"></div>
							<div class="bodyTitle" id="bodyTextGallonsofGas">Gallons of Gas Reduced</div>
						</div>
						<div class="wraps" id="mealsCreated">
							<h3 id="actualmealsCreated"></h3>
							<div class="resultsLine"></div>
							<div class="bodyTitle" id="bodyTextmealsCreated">Meals Created</div>
						</div>
					</div>
				
				</div>
				
				<!-- <table id="final_Results" border="0" cellpadding="12" cellspacing="0" style="border-collapse: collapse; width: 85%; margin: 1.5em; margin-left: 4.3em; font-family: 'Open Sans', sans-serif;">
					
				<tbody>
					<th style="text-align: left; font-family: 'Montserrat', sans-serif; font-size: 20px; font-weight: 600; color: #559B98;border-spacing: 25px; padding-bottom: 30px;">Urban Farm Results</th>
				    <tr style="border-bottom: 1px solid rgba(85, 155, 152, .4); border-top: 1px solid rgba(85, 155, 152, .4); line-height: 1.8em; font-size: 16px;">
				    	
				      <td style="width: 45%; color: #4A4A4A;">Value of Crops Grown:</td>
				      <td id="result1" style="width: 55%; font-weight: bold; text-align: right; color: #559B98;">result1</td></tr>
				    <tr style="border-bottom: 1px solid rgba(85, 155, 152, .4); line-height: 1.8em;font-size: 16px"">
				      <td style="width: 45%;  color: #4A4A4A;">Amount of Water Saved:</td>
				      <td id="result2" style="width: 55%; font-weight: bold;text-align: right; color: #559B98;">result2</td></tr>
				    <tr style="border-bottom: 1px solid rgba(85, 155, 152, .4); line-height: 1.8em;font-size: 16px"">
				      <td style="width: 45%;  color: #4A4A4A;">CO2 Emissions Removed:</td>
				      <td id="result3" style="width: 55%; text-align: right;font-weight: bold; color: #559B98;">result3</td>
				    </tr>
				    <tr style="border-bottom: 1px solid rgba(85, 155, 152, .4); line-height: 1.8em;font-size: 16px"">
				      <td style="width: 45%;  color: #4A4A4A;">Amount of Meals Created:</td>
				      <td id="result4" style="width: 55%; text-align: right; font-weight: bold;color: #559B98;">result4</td>
				    </tr>
				  </tbody>
				</table> -->
			</div>

			<div id="excerciseWrapper">
				<div id="excercise_Priority">
					<h4 id="priority_ExcerciseTitle">Customize Your Priorities</h4>
					<h5 id="priority_ExcerciseBody">Change the default settings for your farm choices to see how each shift influences your overall performance.</h5>
					<div id="priority_Example_Wrapper">
						<div id="example">
							<div id="slider-connect2" class="noUi-target noUi-ltr noUi-horizontal">
							</div>
							<div class="Priority-LabelWrapper">
								<div class="Priority-Label">Environmental Priority: <span id="environmental-value"></span>%</div>
								<div class="Priority-Label">Profitability Priority: <span id="profitability-value"></span>%</div>
								<div class="Priority-Label">Consumability Priority: <span id="consumability-value"></span>%</div>
							</div>
							
			
						</div>
					</div>
				</div>
				<div id="excercise_Default">
					<h4 id="default_ExcerciseTitle">Select a Choice Above to Customize Your Growing Metrics</h4>
					<h5 id="default_ExcerciseBody">Once you have selected your ideal growing situation, let us know you are finished so that you can name your farm and add it to the community.</h5>
					<div id="greyBox"></div>
				</div>
				<div id="excercise_Scale">
					<h4 id="scale_ExcerciseTitle">Tell Us How Large Your Ideal Farm Would Be</h4>
					<h5 id="scale_ExcerciseBody">Change the default settings for your farm choices to see how each shift influences your overall performance.</h5>
					<h4 id="totalSqft">Total Square Footage:</h4>
					<div id="totalSqftLine"></div>
					<div id="scale_Example_Wrapper">
						<div id="Layout"></div>
						<div id="Layoutshadow"></div>
						<h4 id="levelNumber">1</h4>
						<h4 id="levelNumber2">Level</h4>
						<button id="upLevel">+</button>
						<button id="downLevel">-</button>
						<div id="example3">
							<div id="slider-connectZ-Axis" class="noUi-target noUi-ltr noUi-vertical">
								
							</div>
						</div>
						<div id="example1">
							<div id="slider-connectX-Axis" class="noUi-target noUi-ltr noUi-horizontal">
							</div>
						</div>
						
						<!-- <div id="example2">
							<div id="slider-connectY-Axis" class="noUi-target noUi-ltr noUi-horizontal">
								
							</div>
						</div> -->
						
					</div>
				</div>
				<div id="excercise_Cost">
					<h4 id="scale_ExcerciseTitle">Customize the Color of Your <span id="SystemType"></span></h4>
					<h5 id="scale_ExcerciseBody">Drag the RGB sliders to create your own unique color.</br><span id="colorDoesntEffect"><i>The color of your farm does not influence your results.</i><span></h5>
					<div >
						<div id="result">
						
						</div>
						<div id="red" class="sliders noUi-target noUi-ltr noUi-vertical">
							
						</div>
						<div id="green" class="sliders noUi-target noUi-ltr noUi-vertical">
							
						</div>

						<div id="blue" class="sliders noUi-target noUi-ltr noUi-vertical">
							
						</div>
					</div>
					
				</div>
			</div>
		</div>
		<a><button id="EnterCommunityButton">
		Finalize Garden
		</button></a>
		
	</div>

<script type="text/javascript">
	

	$( document ).ready(function() {
  //   	console.log(localStorage.getItem("first"));
		// console.log(localStorage.getItem("second"));
		// console.log(localStorage.getItem("third"));
		$(".check").delay(400).animate({
			opacity: 1
		}, 400,function(){

		});
		$("#line1").animate({
			width: "31px"
		}, 400,function(){

		});

		$("#line2").delay(800).animate({
			width: "31px"
		}, 400, function(){

		});

		var combinedCategories = localStorage.getItem("Priority") + localStorage.getItem("Scale") + localStorage.getItem("Cost");

	
		// console.log(combinedCategories);

		var gardenData;

		loadEverything(combinedCategories);

		// console.log("This is garden data",gardenData);
	


		function loadEverything (x) {

			$("#CustomFarmImg2Wrapper").prepend("<img id='SecondImg' src='Assets/PNG_72ppi/" + x +".png'/>");
			// $(".CustomFarmImg").remove();
			$(".CustomFarmImg2").remove();
			var url = x + ".json";

			var json = (function (){
			var json = null;
			$.ajax({
				'async': false,
				'global': false,
				'url': url,
				'dataType': "json",
				'success': function(data){
					// console.log("This is jquery response",data);
					gardenData = data;
				}
			});
			// console.log("Returned Value",json);
			// return json;
			})();
		}

		document.getElementById("priorityHeader").innerHTML = gardenData.DotTitle1;
		document.getElementById("scaleHeader").innerHTML = gardenData.DotTitle2;
		document.getElementById("costHeader").innerHTML = gardenData.DotTitle3;



		var priority = localStorage.getItem("Priority");
		var scale = localStorage.getItem("Scale");
		var cost = localStorage.getItem("Cost");

		prependCatalog(priority, scale, cost);

		function prependCatalog (a, b, c) {
				$("#priorityWrapper").prepend("<img id='priorityImg' class='catalogItem' src='Assets/individual_Choices/" + a +".png'/>");
				$("#scaleWrapper").prepend("<img id='scaleImg' class='catalogItem' src='Assets/individual_Choices/" + b +".png'/>");
				$("#costWrapper").prepend("<img id='costImg' class='catalogItem' src='Assets/individual_Choices/" + c +".png'/>");
			}
		
		// document.getElementById("result1").innerHTML = gardenData.VegetableValue;
		// document.getElementById("result2").innerHTML = gardenData.WaterSavedValue;
		// document.getElementById("result3").innerHTML = gardenData.GasolineValue;
		// document.getElementById("result4").innerHTML = gardenData.MealsCreatedValue;
		document.getElementById("actualValueCrop").innerHTML = gardenData.VegetableValue;
		document.getElementById("actualGallonsWater").innerHTML = gardenData.WaterSavedValue;
		document.getElementById("actualGallonsGas").innerHTML = gardenData.GasolineValue;
		document.getElementById("actualmealsCreated").innerHTML = gardenData.MealsCreatedValue;

		$(".catalogItem").mouseover(function(){
			// console.log("Returned Value", gardenData);
			var itemName = this.id;
			if(itemName =="priorityImg") {
				$("#priorityWrapper").css("opacity", "1");
			}
			if(itemName =="scaleImg") {
				$("#scaleWrapper").css("opacity", "1");
			}
			if(itemName =="costImg") {
				$("#costWrapper").css("opacity", "1");
			}
		});
		$(".catalogItem").mouseleave(function(){
			if(!opacityBoolean.priorityImg) $("#priorityWrapper").css("opacity", "");
			if(!opacityBoolean.scaleImg) $("#scaleWrapper").css("opacity", "");
			if(!opacityBoolean.costImg) $("#costWrapper").css("opacity", "");

		});

		// this is our global opacity boolean that will keep track of which image should stay opaque
		var opacityBoolean = {priorityImg:false, scaleImg:false, costImg:false};
		// appendChoicePriorityImg (priority);
		// appendChoiceScaleImg (scale);
		// appendChoiceCostImg (cost);

		// function appendChoicePriorityImg (a) {
		// 	$("#chosenWrapper").append("<img id='priorityImg2' class='chosenCatalogItem' src='Assets/individual_Choices/" + a +".png'/>");
		// }
		// function appendChoiceScaleImg (b) {
		// 	$("#chosenWrapper").append("<img id='scaleImg2' class='chosenCatalogItem' src='Assets/individual_Choices/" + b +".png'/>");
		// }
		// function appendChoiceCostImg (c) {
		// 	$("#chosenWrapper").append("<img id='costImg2' class='chosenCatalogItem' src='Assets/individual_Choices/" + c +".png'/>");
		// }

		$(".catalogItem").click(function(){
			var itemName = this.id;
			$("body,html").animate(
		        {
		            scrollTop : 960                       // Scroll 500px from top of body
		        }, 600); 

			if(itemName =="priorityImg") {
				$("#priorityWrapper").css("opacity", "1");
				opacityBoolean.priorityImg = true;
				opacityBoolean.scaleImg = false;
				opacityBoolean.costImg = false;
				//append excercise 1//
				//if priority = 
				$("#excercise_Priority").css("z-index", "5");
				$("#excercise_Priority").css("visibility", "visible");
				$("#excercise_Scale").css("z-index", "0");
				$("#excercise_Scale").css("visibility", "hidden");
				$("#excercise_Cost").css("z-index", "0");
				$("#excercise_Cost").css("visibility", "hidden");
				$("#scaleImg2").remove();
				$("#costImg2").remove();
				$("#excercise_Default").css("z-index", "0");
				$("#excercise_Default").css("visibility", "hidden");
				// appendChoicePriorityImg (priority);
				


			}

			if(itemName =="scaleImg") {
				$("#scaleWrapper").css("opacity", "1");
				opacityBoolean.priorityImg = false;
				opacityBoolean.scaleImg = true;
				opacityBoolean.costImg = false;
				//append excercise 2//
				$("#excercise_Scale").css("z-index", "5");
				$("#excercise_Scale").css("visibility", "visible");
				$("#excercise_Priority").css("z-index", "0");
				$("#excercise_Priority").css("visibility", "hidden");
				$("#excercise_Cost").css("z-index", "0");
				$("#excercise_Cost").css("visibility", "hidden");
				$("#priorityImg2").remove();
				$("#costImg2").remove();
				$("#excercise_Default").css("z-index", "0");
				$("#excercise_Default").css("visibility", "hidden");
				// appendChoiceScaleImg (scale);
				

			}

			if(itemName =="costImg") {
				$("#costWrapper").css("opacity", "1");
				opacityBoolean.priorityImg = false;
				opacityBoolean.scaleImg = false;
				opacityBoolean.costImg = true;

				$("#excercise_Cost").css("z-index", "5");
				$("#excercise_Cost").css("visibility", "visible");
				$("#excercise_Priority").css("z-index", "0");
				$("#excercise_Priority").css("visibility", "hidden");
				$("#excercise_Scale").css("z-index", "0");
				$("#excercise_Scale").css("visibility", "hidden");
				$("#priorityImg2").remove();
				$("#scaleImg2").remove();
				$("#excercise_Default").css("z-index", "0");
				$("#excercise_Default").css("visibility", "hidden");
				// appendChoiceCostImg (cost);
				

				//append excercise 3//
			}
			
		});



		// Excercise 3 color picker

			if (cost == "S") {
				document.getElementById("SystemType").innerHTML = "Grow Shelves";
			}
			if (cost == "T") {
				document.getElementById("SystemType").innerHTML = "Grow Towers";
			}
			
			if (scale == "W") {
				document.getElementById("SystemType").innerHTML = "Grow Walls";
			}
			

			// var color_slider = sliders.querySelectorAll('.noUi-connect');
			// var classes = ['c-2-color'];
			// console.log(color_slider);
			// for ( var i = 0; i < color_slider.length; i++ ) {
			//     color_slider[i].classList.add(classes[i]);
			// }

			
			var resultElement = document.getElementById('result');
			var sliders = document.getElementsByClassName('sliders');
			var colors = [0,0,0];

			[].slice.call(sliders).forEach(function( slider, index ){

				noUiSlider.create(slider, {
					start: 127,
					connect: [true, false],
					orientation: "vertical",
					range: {
						'min': 0,
						'max': 255
					},
					format: wNumb({
						decimals: 0
					})
				});
				
				// Bind the color changing function to the update event.
				slider.noUiSlider.on('update', function ( ) {
					
					colors[index] = slider.noUiSlider.get();
					
					var color = 'rgb(' + colors.join(',') + ')';

					resultElement.style.background = color;
					resultElement.style.color = color;
				});
			});



		// setting slider constants for sliderconnectAxis
		var sliderconnectZ = document.getElementById('slider-connectZ-Axis');
		var sliderconnectX = document.getElementById('slider-connectX-Axis');
		// var sliderconnectY = document.getElementById('slider-connectY-Axis');
		var minZValue = null;
		var maxZValue = null;
		var minXValue = null;
		var maxXValue = null;

		if (scale == "A") {
			var minZValue =5;
			var maxZValue =30;
			var minXValue =5;
			var maxXValue =30;
		}
		if (scale == "R") {
			var minZValue = 30;
			var maxZValue = 100;
			var minXValue = 30;
			var maxXValue = 100;
		}
		
		if (scale == "V") {
			var minZValue =100;
			var maxZValue =300;
			var minXValue =100;
			var maxXValue =300;
		}
		
		// var minYValue = 10;
		// var maxYValue = 100;
		noUiSlider.create(sliderconnectZ, {
			start: [ (minZValue + maxZValue)/2 ],
			orientation: 'vertical',
			connect: [false, true],
			pips: {
				mode: 'values',
				values: [], //TODO: Add values and format in CSS
				density: 9
			},
			range: {
				'min': [  minZValue ],
				'max': [ maxZValue ]
			}
			
		});
		noUiSlider.create(sliderconnectX, {
			start: [ (minXValue + maxXValue)/2 ],
			connect: [true, false],
			pips: {
				mode: 'values',
				values: [], //TODO: Add values and format in CSS
				density: 9
			},
			range: {
				'min': [  minXValue ],
				'max': [ maxXValue ]
			}
		});

		var valueZ = sliderconnectZ.noUiSlider.get();
		var valueX = sliderconnectX.noUiSlider.get();

		sliderconnectZ.noUiSlider.on('slide', function(){
			var findZ = sliderconnectZ.noUiSlider.get();
			valueZ = maxZValue - parseInt(findZ);
			globalZ = valueX * valueZ;
			// console.log(connectSlider2.noUiSlider.get())
			updateTable(connectSlider2.noUiSlider.get());
		});

		sliderconnectX.noUiSlider.on('slide', function(){
			var findX = sliderconnectX.noUiSlider.get();
			valueX = parseInt(findX);
			globalZ = valueX * valueZ;
			// console.log(globalZ)
			updateTable(connectSlider2.noUiSlider.get());
		});
			
		
		// noUiSlider.create(sliderconnectY, {
		// 	start: [ (minYValue + maxYValue)/2 ],
		// 	connect: [false, true],
		// 	pips: {
		// 		mode: 'values',
		// 		values: [], //TODO: Add values and format in CSS
		// 		density: 9
		// 	},
		// 	range: {
		// 		'min': [  minYValue ],
		// 		'max': [ maxYValue ]
		// 	}
		// });
			var globalZ = valueZ * valueX;
		// var globalZ = (valueZ * valueX); //TO DO: FIXXX
		// console.log(globalZ);
		var connectsquareFootZ = sliderconnectZ.querySelectorAll('.noUi-connect');
		var connectsquareFootX = sliderconnectX.querySelectorAll('.noUi-connect');
		// var connectsquareFootY = sliderconnectY.querySelectorAll('.noUi-connect');
		var classes = ['c-2-color'];

		for ( var i = 0; i < connectsquareFootZ.length; i++ ) {
		    connectsquareFootZ[i].classList.add(classes[i]);
		}

		for ( var i = 0; i < connectsquareFootX.length; i++ ) {
		    connectsquareFootX[i].classList.add(classes[i]);
		}
		// for ( var i = 0; i < connectsquareFootY.length; i++ ) {
		//     connectsquareFootY[i].classList.add(classes[i]);
		// }
		// setting slider constants for connectSlider2
		var connectSlider2 = document.getElementById('slider-connect2');
		var maxSliderValue = 100;
		var minSliderValue = 0;
		var minSliderLimit = 60;
		var maxSliderLimit = 100;

		noUiSlider.create(connectSlider2, {
			start: [minSliderLimit, minSliderLimit + (maxSliderLimit - minSliderLimit)/2],
			connect: [true, true, true],
			// padding: [ 10, 15 ],
			range: {
			  'min': minSliderValue,
			  'max': maxSliderValue
			},
			pips: {
				mode: 'values',
				values: [], //TODO: Add values and format in CSS
				density: 4
			},
			margin:5
		});

		var connect = connectSlider2.querySelectorAll('.noUi-connect');
		var classes = ['c-1-color', 'c-2-color', 'c-3-color'];

		for ( var i = 0; i < connect.length; i++ ) {
		    connect[i].classList.add(classes[i]);
		}

		// 20% soft slider bounce code
		connectSlider2.noUiSlider.on('change', function ( values, handle ) {
			if ( values[handle] < minSliderLimit ) {
				connectSlider2.noUiSlider.set(minSliderLimit);
			} else if ( values[handle] > maxSliderLimit ) {
				connectSlider2.noUiSlider.set(maxSliderLimit);
			}
		});

		var calcConst = {
			//z values need to be updated by user choices
			c:{ //consumability
				A:0.171, B:12, X:0.83, Y:5.7
			},
			p:{ //profitability
				A:2.133, B:22.4, X:3.33, Y:0.2
			},
			e:{ //environmental
				A:0.147, B:5.16, X:0.83, Y:29.35
			},
			z:globalZ,
			multiplier: 1
		};

		var weightedCalcConst = null;

		// console.log(calcConst.consumability.A);
		// grabbing slider values
		// Display the slider value and how far the handle moved
		// from the left edge of the slider.
		connectSlider2.noUiSlider.on('update', function ( values, handle, unencoded, isTap, positions ) {
			updateTable(values);
		});

		$("#upLevel").click(function(){
			updateLevels(1);
		});

		$("#downLevel").click(function(){
			updateLevels(-1);
		});

		function updateLevels(increment){
			calcConst.multiplier += increment;
			if(calcConst.multiplier < 1) calcConst.multiplier = 1;
			// console.log(calcConst.multiplier);
			document.getElementById("levelNumber").innerHTML = calcConst.multiplier;
			// <h3 id="levelNumber">1</h3>
			updateTable(connectSlider2.noUiSlider.get());

		}

		//maxXValue is the total slider
		//maxZValue is the total up slider

		
		function updateTable(values){
			var connectorTagID = {}
			calcConst.z = globalZ; //need to push this value in because we use cc.z below in calcoutputvalues();
			document.getElementById("totalSqft").innerHTML = "Total Square Footage: " + Math.round(calcConst.z * calcConst.multiplier);
			document.getElementById('Layout').style.width = (180*(Math.round(valueX)/Math.round(maxXValue))) + "px";
			document.getElementById('Layout').style.height = (150*(Math.round(valueZ)/Math.round(maxZValue))) + "px";
			document.getElementById('Layoutshadow').style.width = (180*(Math.round(valueX)/Math.round(maxXValue))) + "px";
			document.getElementById('Layoutshadow').style.height = (150*(Math.round(valueZ)/Math.round(maxZValue))) + "px";
			// widthChange(-1);
			// document.getElementById('mygraph').style.width = my_width + "px";
			// $("#Layout").css("width", '"'+ 180 - (Math.round(connectsquareFootZ)) + 'px"');  //TO DO
			// $("#Layoutshadow").css("width", "'" + 180 - (Math.round(sliderconnectX.noUiSlider.get())) +"px'");
			// console.log(sliderconnectX.noUiSlider.get());
			// <h4 id="totalSqft">Total Square Footage:</h4>
			console.log(180*(valueX/maxXValue));
			var values = connectSlider2.noUiSlider.get();
			var connector1 = values[0];
			var connector2 = values[1] - values[0];
			var connector3 = maxSliderValue - values[1];
			var pConnect, eConnect, cConnect = null;
			switch(priority){
				case("E"):
					eConnect = connector1;
					pConnect = connector2;
					cConnect = connector3;
					break;
				case("P"):
					pConnect = connector1;
					eConnect = connector2;
					cConnect = connector3;
					break;
				case("C"):
					cConnect = connector1;
					pConnect = connector2;
					eConnect = connector3;
					break
				default:
					alert("Growing priority not set, please go back!")
				break;
			}
			
			// connector order dictated by which of the three -value attributes was preferenced
			document.getElementById('environmental-value').innerHTML = Math.round(eConnect);
			document.getElementById('profitability-value').innerHTML = Math.round(pConnect);
			document.getElementById('consumability-value').innerHTML = Math.round(cConnect);			
			weightedCalcConst = calcAvgWeighted(calcConst, eConnect, pConnect, cConnect);
			var tableValues = calcOutputValues(weightedCalcConst, calcConst);
			
			// document.getElementById("result1").innerHTML = "$" + Math.round(tableValues.cropVal) + " /Year"; 
			// document.getElementById("result2").innerHTML = Math.round(tableValues.waterUse) + " Gallons/Year"; 
			// document.getElementById("result3").innerHTML = Math.round(tableValues.co2Emit) + " Gallons of Gas";
			// document.getElementById("result4").innerHTML = Math.round(tableValues.meals) + " Meals/Year";
			document.getElementById('actualValueCrop').innerHTML = "$" + Math.round(tableValues.cropVal); 
			document.getElementById('actualGallonsWater').innerHTML = Math.round(tableValues.waterUse); 
			document.getElementById('actualGallonsGas').innerHTML = Math.round(tableValues.co2Emit);
			document.getElementById('actualmealsCreated').innerHTML = Math.round(tableValues.meals);
		}


		/**
		Determine the values to be output into final table based on user choices and slider values
		inputs: weighted calculation constants as wcc, calculation constants for z values
		output: JSON of {}
		**/
		function calcOutputValues(wcc, cc){
			var cropVal = cc.z * cc.multiplier * wcc.X * wcc.B * wcc.A;
			var waterUse = cc.z * cc.multiplier * wcc.X * wcc.Y;
			var co2Emit = (cc.z * cc.multiplier * 100 / 4536) * 4;
			var meals = (cc.z * cc.multiplier / 10) * wcc.B;
			var output = {cropVal:cropVal, waterUse:waterUse, co2Emit:co2Emit, meals:meals};
			return output;

		}



		/**
		Takes weighted average of cc values with weights eV, pV, and cV
		as determined by Jordan's 'special' formula
		**/
		function calcAvgWeighted(cc, eV, pV, cV){
			var output = {
				A:0,
				B:0,
				X:0,
				Y:0
			}
			for (var k in cc.c) {
				if(output.hasOwnProperty(k)){
					output[k] += cc.c[k]*cV/100;
				}				
			}
			for (var k in cc.p) {
				if(output.hasOwnProperty(k)){
					output[k] += cc.p[k]*pV/100;
				}				
			}
			for (var k in cc.e) {
				if(output.hasOwnProperty(k)){
					output[k] += cc.e[k]*eV/100;
				}				
			}
			// for(var k in output){
			// 	output[k] = Math.round(output[k]);
			// }
			return output;

		}

			// <text id="enviromental-value"></text>
			// 				<text id="profitability-value"></text>
			// 				<text id="consumability-value"></text>


	// $('input[ type="range"]').rangeslider({
	// 		  // Feature detection the default is `true`.
	// 	    // Set this to `false` if you want to use
	// 	    // the polyfill also in Browsers which support
	// 	    // the native <input type="range"> element.
	// 	    polyfill: false,

	// 	    // Callback function
	// 	    onInit: function() {
	
	// 	    },

	// 	    // Callback function
	// 	    onSlide: function(position, value) {

	// 	    },

	// 	    // Callback function
	// 	    onSlideEnd: function(position, value) {
	// 	    	console.log(value);
	// 	    }
	// 	});





	 
	 $('#mission_Statement').click(function(){
				$("#missionStatementContentWrapper").css("z-index", "102");
				$("#missionStatementContentWrapper").css("opacity", "1");

			});

			$('.xm2').click(function(){
				$("#missionStatementContentWrapper").css("opacity", "");
				$("#missionStatementContentWrapper").delay(800).queue(function(next) {
					$(this).css("z-index", "");
					next();
				});

			});

	$('#EnterCommunityButton').click(function(){
				$("#nameGardenContentWrapper").css("z-index", "102");
				$("#nameGardenContentWrapper").css("opacity", "1");

			});

			$('.xm3').click(function(){
				$("#nameGardenContentWrapper").css("opacity", "");
				$("#nameGardenContentWrapper").delay(800).queue(function(next) {
					$(this).css("z-index", "");
					next();
				});

			});

	$(window).scroll( function(){

  //get scroll position
  var topWindow = $(window).scrollTop();
  //multipl by 1.5 so the arrow will become transparent half-way up the page
  var topWindow = topWindow * 1.5;
  
  //get height of window
  var windowHeight = $(window).height();
      
  //set position as percentage of how far the user has scrolled 
  var position = topWindow / windowHeight;
  //invert the percentage
  position = 1 - position;

  //define arrow opacity as based on how far up the page the user has scrolled
  //no scrolling = 1, half-way up the page = 0
  $('.arrow-wrap').css('opacity', position);

	});

	$(".arrow-wrap").click(function()  // When arrow is clicked
		    {
		        $("body,html").animate(
		        {
		            scrollTop : 670                       // Scroll 500px from top of body
		        }, 1000);  //how fast the scrolling animation will be in miliseconds
	});

		/* initializing firebase */
		var config = {
			apiKey: "AIzaSyCz8j_wouFYfrsdMHfw-Asx90Z0ujSZlNo",
			authDomain: "herban-f14b6.firebaseapp.com",
			databaseURL: "https://herban-f14b6.firebaseio.com/",
			projectId: "herban-f14b6",
			storageBucket: "herban-f14b6.appspot.com",
			messagingSenderId: "577414616663" 
		};
		firebase.initializeApp(config);

		
		$("#SubmitNameButton").click(function(){		
			writeNewPost();
			setTimeout(function(){
				window.location.href = "GardenBuilder_Community.html";
			}, 200);
			// redirectCommunity();
		});

		function writeNewPost() {
			// A post entry.

			// var postData = {
			// 	A_customizedName: $("#userid").val(),
			// 	B_vegetableValue: document.getElementById("result1").innerHTML,
			// 	C_waterUsage: document.getElementById("result2").innerHTML,
			// 	D_gasValue: document.getElementById("result3").innerHTML,
			// 	E_mealsCreatedValue: document.getElementById("result4").innerHTML,
			// 	F_livingSpace: localStorage.getItem("Scale"),
			// 	G_headerImage: combinedCategories
			// };

			var postData = {
				A_customizedName: $("#userid").val(),
				B_vegetableValue: document.getElementById("actualValueCrop").innerHTML,
				C_waterUsage: document.getElementById("actualGallonsWater").innerHTML,
				D_gasValue: document.getElementById("actualGallonsGas").innerHTML,
				E_mealsCreatedValue: document.getElementById("actualmealsCreated").innerHTML,
				F_livingSpace: localStorage.getItem("Scale"),
				G_headerImage: combinedCategories
			};
		
			// Get a key for a new Post.
			var newPostKey = firebase.database().ref().child('/users/').push().key;			
		
			// Write the new post's data simultaneously in the posts list and the user's post list.
			var updates = {};
			updates['/users/' + newPostKey] = postData;
			return firebase.database().ref().update(updates);
		}

		// var ref = firebase.database().ref('/users/');

		// //function that loads what's in the database
		// var data = [];
		// function loadDatabase(keys) {
		    
		//     //array [ ] used for saving each 'post'
		//     // console.log('outer1')
		//     ref.on('value',function(snap) {

		//         snap.forEach(function(item) {
		            
		//             //getting the post from database
		//             var itemVal = item.val();
		//             // console.log('allenLog: ' + itemVal);
		//             //saving each post to keys [ ]
		//             keys.push(itemVal);
		//             // console.log(keys.length)
		//         });

		//         //displaying what's in keys [ ]		        
		//     });	
		// }
		// loadDatabase(data);
		
		// var manipData = {};
		// setTimeout(function(){
		// 		// console.log(data)
		// 		var i = 0;
		// 		for(var k in data){
		// 			if(data.hasOwnProperty(k)){
		// 				manipData[i] = {
		// 					A_customizedName : data[k].A_customizedName,
		// 					B_vegetableValue : data[k].B_vegetableValue,
		// 					C_waterUsage : data[k].C_waterUsage,
		// 					D_gasValue : data[k].D_gasValue,
		// 					E_mealsCreatedValue : data[k].E_mealsCreatedValue,
		// 					F_livingSpace : data[k].F_livingSpace,
		// 					G_headerImage : data[k].G_headerImage
		// 				};
		// 				i++;
						
		// 			}
		// 		}
		// 		//@Jordan: all code involving data from database must go in here
		// 		// OR figure out how to wait for return of 
		// 		console.log(manipData[0].A_customizedName);
		// 	}, 1000);


		

		// // console.log(keys.length)
		// // console.log('jordan: ' + ref);
		// // var dataKeys = {
		// // 	A_customizedName:"A_customizedName",
		// // 	B_vegetableValue:"B_vegetableValue",
		// // 	C_waterUsage: "C_waterUsage",
		// // 	D_gasValue: "D_gasValue",
		// // 	E_mealsCreatedValue: "E_mealsCreatedValue",
		// // 	F_livingSpace: "F_livingSpace",
		// // 	G_headerImage: "G_headerImage"
		// // };

		// // function pullData(ref, response){
		// // 	ref.once('value').then(function(snapshot){
		// // 		var out = snapshot.val();
		// // 		for(var k in out){

		// // 			if(out.hasOwnProperty(k)){
		// // 				// console.log(out[k].A_customizedName);
		// // 				// console.log('k: ' + k);
		// // 				for(var j in dataKeys){
		// // 					// console.log(k.A_customizedName);
		// // 					// console.log('j: ' + j);
		// // 					console.log("response: " + out[k].B_vegetableValue + "." + j);
		// // 					if(k.hasOwnProperty(j)){
		// // 						// console.log('j: ' + j);
		// // 						// console.log("response: " + out[k]);
		// // 					}							
		// // 				}
		// // 			}
					
					
		// // 			response.push(({key: k, value: out[k]}))
		// // 		}			
		// // 	});
		// // }
		// // var response = [];
		// // pullData(ref, response);
		// // console.log("output: " + response);
		// // for (var k in response){
		// // 	console.log(response[k]);
		// // }
		
		// // writeNewPost(); //TODO: move this somewhere else!
});	


		
</script>
</body>
</html>