<!DOCTYPE html>
<html>
<head>
	<title></title>
	<link rel="stylesheet" type="text/css" href="MainPageStyles.css">
	<link rel="stylesheet" type="text/css" href="rangeslider.css">
	<link href="https://fonts.googleapis.com/css?family=Montserrat:300i,300,400,500,600,700|Open+Sans:300,400,400i" rel="stylesheet">
	<script src="https://code.jquery.com/jquery-1.10.2.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/skrollr/0.6.30/skrollr.min.js"></script>
	<script src='rangeslider.min.js'></script>
	<script src="https://www.gstatic.com/firebasejs/4.9.1/firebase.js"></script>
	<!--font-family: 'Open Sans', sans-serif;
		font-family: 'Montserrat', sans-serif; -->
</head>

<body>
	<div id="missionStatementContentWrapper">
		<div id="darkBackground">
			
		</div>
		<div id="modalBackground">
			<div id="content2">
				<img id="MissionStatementImg2" src="Assets/PNG_72ppi/Mission_Statement2.png">
				<div id="MissionStatementWrapper2">
					<h3 id="MissionStatementTitle2">Mission Statement</h3>
					<h5 id="MissionStatementBody2">
					Herban is not just a company, we are a green-based lifestyle </br>brand. By taking advantage of a digital marketplace, autonomous gardening, and drone delivery system, Herban will sell and deliver locally sourced produce directly to and from our customers' doorsteps.  Our mission is to drive the change required for a sustainable future. By limiting the amount of traditional farmland needed to feed a growing population and by integrating green spaces into every facet of city life, our Green Breeze system will foster environmental rejuvination and healthier city ecosystems.
					</h5>
					<div class="circleXm2">
					</div>
					<button class="xm2" id="missionX2">
					</button>
				</div>
			</div>
		</div> 
	</div>

	<div id="HighLevelNavigationTop">
			<span id="Span1"> <a data-text="OUR MISSION" id="mission_Statement">OUR MISSION</a></span>
		    <span id="Span2"><a href="MainHomePage4.html#introWrapper" data-text="GARDEN BUILDER" >GARDEN BUILDER</a></span>
		    <span id="Span3"> <a href="MainHomePage4.html" data-text="HERBAN LOGO" id="HerbanLogo4"></a></span>
		    <span id="Span4"><a href="Further_Reading.html" data-text="FURTHER READINGS" ">FURTHER READINGS</a></span>
		    <span id="Span5"><a href="_____" data-text="THE COMMUNITY" id="SelectedNavItem">THE COMMUNITY</a></span>
		    <!-- <a href="MainHomePage4.html#introWrapper" data-text="GARDEN BUILDER" id="SelectedNavItem">GARDEN BUILDER</a>
		    <span> <a data-text="OUR MISSION" id="mission_Statement">OUR MISSION </a></span>
		    <span> <a href="MainHomePage4.html" data-text="HERBAN LOGO" id="HerbanLogo4"></a></span>
		    <span><a href="Further_Reading.html" data-text="FURTHER READINGS">FURTHER READINGS</a></span>
		    <span><a href="_____" data-text="THE COMMUNITY" >THE COMMUNITY</a></span> -->
	</div> 
	<div id="community_Header_Wrapper"
		data-0="opacity: 1; left: 150px;",
		data-40p="opacity: 0; left: 30px;"
		data-50p="left: 0px;"
	>
		<h3 id="welcome_To_Community">Welcome to The Community</h3>
		<h5 id="welcome_To_Community_Body">Enjoy exploring our collection of member farms. See each member's farm preferences and how their custom grow plots are changing the world one crop at a time. You may even find your own! </h5>
	</div>
	<div id="scroll_Hint_Wrapper"
		data-0="opacity: .5;",
		data-8p="opacity: 0;"
	>
		<img src="Assets/Arrow_Community.png" id="community_Arrow">
		<img src="Assets/Mouse_Community.png" id="mouse_Icon">
		<h5 id="scroll_Text">Scroll Your Mouse</h5>
	</div>
	<div id="community_Illustrations_Wrapper">
		<!-- <img class="factbutton" src="Assets/info_button3.png" alt="info_button"> -->
		<!-- In this wrapper I will be appending: hedge cluster images after every 4 farms created, farms (saved on the server), purple dots towards the center left side of every farm, and a text bubble 10px above every dot (with the farm choices: name, choices, environmental effects) -->

		<div id="IllustrationToppers"
			data-0="left: 900px;",
			data-100p=" left: -140px;"
		>
			<img src="Assets/community_Pages/Asset_6.png" name="frontRowHedge" id="firstGrass">
		</div>
		<div id="IllustrationToppersGrass"
			data-0="left: 1150px;",
			data-100p=" left: 110px;"
		>
			<!-- <img src="Assets/community_Pages/Asset_4.png" name="hedges" class="grassSpecs"> -->
		</div>
		<div id="IllustrationToppersBuildingsOdd"
			data-0="left: 980px;",
			data-100p=" left: -60px;"
		>
			<!-- <img src="Assets/community_Pages/Asset_4.png" name="hedges" class="grassSpecs"> -->
		</div>

		<div id="IllustrationToppersBuildingsEven"
			data-0="left: 870px;",
			data-100p=" left: -170px;"
		>
		</div>

		<img id="Platform" src="Assets/community_Pages/Asset_5.png"
			data-0="left: 900px;",
		    data-100p="left: -140px;"
		>

	</div>

<script type="text/javascript">

	$( document ).ready(function() {
  //   
  	var s = skrollr.init();


			$('#mission_Statement').click(function(){
				$("#missionStatementContentWrapper").css("z-index", "102");
				$("#missionStatementContentWrapper").css("opacity", "1");

			});

			$('.xm2').click(function(){
				$("#missionStatementContentWrapper").css("opacity", "");
				$("#missionStatementContentWrapper").delay(800).queue(function(next) {
					$(this).css("z-index", "");
					next();
				});

			});

  	


		var combinedCategories = localStorage.getItem("Priority") + localStorage.getItem("Scale") + localStorage.getItem("Cost");

		console.log(combinedCategories);

		var gardenData;

		loadEverything(combinedCategories);

		console.log("This is garden data",gardenData);

		function loadEverything (x) {
			$("#CustomFarmImgWrapper").prepend("<img id='FirstImg' src='Assets/PNG_72ppi/" + x +".png'/>");
			$("#CustomFarmImg2Wrapper").prepend("<img id='SecondImg' src='Assets/PNG_72ppi/" + x +".png'/>");
			$(".CustomFarmImg").remove();
			$(".CustomFarmImg2").remove();
			var url = x + ".json";

			var json = (function (){
			var json = null;
			$.ajax({
				'async': false,
				'global': false,
				'url': url,
				'dataType': "json",
				'success': function(data){
					console.log("This is jquery response",data);
					gardenData = data;
				}
			});
			console.log("Returned Value",json);
			// return json;
			})();
		}

		/* initializing firebase */
		var config = {
			apiKey: "AIzaSyCz8j_wouFYfrsdMHfw-Asx90Z0ujSZlNo",
			authDomain: "herban-f14b6.firebaseapp.com",
			databaseURL: "https://herban-f14b6.firebaseio.com/",
			projectId: "herban-f14b6",
			storageBucket: "herban-f14b6.appspot.com",
			messagingSenderId: "577414616663" 
		};
		firebase.initializeApp(config);



		var ref = firebase.database().ref('/users/');

		//function that loads what's in the database
		var data = [];
		function loadDatabase(keys) {
		    
		    //array [ ] used for saving each 'post'
		    // console.log('outer1')
		    ref.on('value',function(snap) {

		        snap.forEach(function(item) {
		            
		            //getting the post from database
		            var itemVal = item.val();
		            // console.log('allenLog: ' + itemVal);
		            //saving each post to keys [ ]
		            keys.push(itemVal);
		            // console.log(keys.length)
		        });

		        //displaying what's in keys [ ]		        
		    });	
		}

		loadDatabase(data);
		var dataLength;


		
		var manipData = {};
		

		setTimeout(function(){
				// console.log(data)
				dataLength = data.length;
				var i = 0;
				for(var k in data){
					if(data.hasOwnProperty(k)){
						manipData[i] = {
							A_customizedName : data[k].A_customizedName,
							B_vegetableValue : data[k].B_vegetableValue,
							C_waterUsage : data[k].C_waterUsage,
							D_gasValue : data[k].D_gasValue,
							E_mealsCreatedValue : data[k].E_mealsCreatedValue,
							F_livingSpace : data[k].F_livingSpace,
							G_headerImage : data[k].G_headerImage
						};

						var buildingTypeStored = manipData[i].F_livingSpace;
						var x = i + 1;

						console.log("type: " + buildingTypeStored + ", x: " + x);
						
						addBuildings(buildingTypeStored,x);

						i++;
						
					}
				}

				//@Jordan: all code involving data from database must go in here
				// OR figure out how to wait for return of 

				addGrass();
				console.log("building type" + buildingTypeStored);
			}, 1000);


		function addGrass(){			
			for(var i = 0; i <= (Math.round(dataLength/4)+1); i++) {
				if (dataLength > 4*i) {
					$("#IllustrationToppersGrass").append("<img src='Assets/community_Pages/Asset_4.png' name='hedges' class='grassSpecs'>");
				}
			}
		}


		function addBuildings(buildingType,i){
			//for(var i = 0; i <= dataLength; i++) {
				if ((i%2) === 0) {
					$("#IllustrationToppersBuildingsEven").append("<img src='Assets/community_Pages/same_Size/" + buildingType + ".png' name='buildings' class='appendedBuildingsEven'>");
				}
				else {
					$("#IllustrationToppersBuildingsOdd").append("<img src='Assets/community_Pages/same_Size/" + buildingType + ".png' name='buildings' class='appendedBuildingsOdd'>");
				}
			//}
		}

		// console.log(keys.length)
		// console.log('jordan: ' + ref);
		// var dataKeys = {
		// 	A_customizedName:"A_customizedName",
		// 	B_vegetableValue:"B_vegetableValue",
		// 	C_waterUsage: "C_waterUsage",
		// 	D_gasValue: "D_gasValue",
		// 	E_mealsCreatedValue: "E_mealsCreatedValue",
		// 	F_livingSpace: "F_livingSpace",
		// 	G_headerImage: "G_headerImage"
		// };

		// function pullData(ref, response){
		// 	ref.once('value').then(function(snapshot){
		// 		var out = snapshot.val();
		// 		for(var k in out){

		// 			if(out.hasOwnProperty(k)){
		// 				// console.log(out[k].A_customizedName);
		// 				// console.log('k: ' + k);
		// 				for(var j in dataKeys){
		// 					// console.log(k.A_customizedName);
		// 					// console.log('j: ' + j);
		// 					console.log("response: " + out[k].B_vegetableValue + "." + j);
		// 					if(k.hasOwnProperty(j)){
		// 						// console.log('j: ' + j);
		// 						// console.log("response: " + out[k]);
		// 					}							
		// 				}
		// 			}
					
					
		// 			response.push(({key: k, value: out[k]}))
		// 		}			
		// 	});
		// }
		// var response = [];
		// pullData(ref, response);
		// console.log("output: " + response);
		// for (var k in response){
		// 	console.log(response[k]);
		// }
		
		// writeNewPost(); //TODO: move this somewhere else!

		// pulling databse data
		// var output = pullData();
		// console.log("output: " + output);


		// function pullData(){
		// 	var temp = firebase.database().ref('/users/').once('value').then(function(snapshot){
		// 		var out = snapshot.val();	
		// 		for(var k in output){
		// 			console.log("response: " + out[k].A_customizedName);
		// 		}			
		// 	});
		// 	return out;
		// }
});	


		
</script>
</body>
</html>